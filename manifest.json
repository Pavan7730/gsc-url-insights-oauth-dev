const CLIENT_ID =
  "669869853203-la12753n1ac5u8m5apt26fmgcnliprq0.apps.googleusercontent.com";

const SCOPES = [
  "https://www.googleapis.com/auth/webmasters.readonly"
];

chrome.runtime.onMessage.addListener((msg, sender, sendResponse) => {
  if (msg.type === "AUTH_GSC") {
    chrome.identity.getAuthToken(
      { interactive: true },
      (token) => {
        if (chrome.runtime.lastError) {
          console.error(chrome.runtime.lastError);
          sendResponse({ error: chrome.runtime.lastError.message });
          return;
        }

        chrome.storage.local.set({ gscToken: token }, () => {
          sendResponse({ success: true });
        });
      }
    );
    return true; // IMPORTANT
  }
});
